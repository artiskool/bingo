<!DOCTYPE html>
<html>
<head>
  <title>Bingo</title>
  <script>
    /*
    // Function to generate an array of unique random Bingo numbers
    function generateUniqueBingoNumbers(count) {
      const numbers = [];
      while (numbers.length < count) {
        const number = Math.floor(Math.random() * 75) + 1;
        if (!numbers.includes(number)) {
          numbers.push(number);
        }
      }
      return numbers;
    }

    // Function to read out Bingo number using Web Speech API
    function readBingoNumber(number) {
      const utterance = new SpeechSynthesisUtterance(`The next Bingo number is ${number}`);
      speechSynthesis.speak(utterance);
    }

    // Function to display Bingo number in header or bold
    function displayBingoNumber(number) {
      const numberElement = document.createElement('h2');
      numberElement.textContent = number;
      document.body.appendChild(numberElement);
    }

    // Main program loop
    function main() {
      const startButton = document.getElementById('startButton');
      startButton.style.display = 'none'; // Hide start button after clicking
      const numbers = generateUniqueBingoNumbers(10);
      for (let i = 0; i < numbers.length; i++) {
        const number = numbers[i];
        readBingoNumber(number);
        displayBingoNumber(number);
      }
    }
    */

    // Global variables
    const bingoCache = {
      plays: [],
      currentPlay: [],
      numbers: [],
      currentIndex: 0,
    };
    try {
      const data = JSON.parse(localStorage.getItem('bingo'));
      if ('plays' in data) bingoCache.plays = data.plays;
      if ('currentPlay' in data) bingoCache.currentPlay = data.currentPlay;
      if ('numbers' in data) bingoCache.numbers = data.numbers;
      if ('currentIndex' in data) bingoCache.currentIndex = data.currentIndex;
    }
    catch (error) {}

    // Function to generate an array of unique random Bingo numbers
    function generateUniqueBingoNumbers(count) {
      const numbers = [];
      while (numbers.length < count) {
        const number = Math.floor(Math.random() * 75) + 1;
        if (!numbers.includes(number)) {
          numbers.push(number);
        }
      }
      return numbers;
    }

    // Function to read out Bingo number using Web Speech API
    function readBingoNumber(number) {
      const utterance = new SpeechSynthesisUtterance(number);
      speechSynthesis.speak(utterance);
    }

    // Function to display Bingo number in header or bold
    function displayBingoNumber(number) {
      const numberElement = document.createElement('h2');
      numberElement.textContent = number;
      document.getElementById('display').prepend(numberElement);
    }

    function storeBingoNumber(number) {
      bingoCache.currentPlay.push(number);
    }

    // Function to go to the next Bingo number
    function nextBingoNumber() {
      if (bingoCache.currentIndex < bingoCache.numbers.length - 1) {
        readBingoNumber(bingoCache.numbers[bingoCache.currentIndex]);
        displayBingoNumber(bingoCache.numbers[bingoCache.currentIndex]);
        storeBingoNumber(bingoCache.numbers[bingoCache.currentIndex]);
        bingoCache.currentIndex++;
        saveBingoCache();
      }
    }

    // Main program loop
    function main() {
      const startButton = document.getElementById('startButton');
      startButton.style.display = 'none'; // Hide start button after clicking
      numbers = generateUniqueBingoNumbers(75);
      readBingoNumber(numbers[currentIndex]);
      displayBingoNumber(numbers[currentIndex]);
      storeBingoNumber(numbers[currentIndex]);
      const nextButton = document.getElementById('nextButton');
      nextButton.style.display = 'block'; // Show next button after generating first number
      const resetButton = document.getElementById('resetButton');
      resetButton.style.display = 'block'; // Show reset button after generating first number
    }

    function saveBingoCache() {
      localStorage.setItem('bingo', JSON.stringify(bingoCache));
    }

    function initBingo() {
      bingoCache.currentIndex = 0;
      bingoCache.currentPlay = [];
      bingoCache.numbers = generateUniqueBingoNumbers(75);
      saveBingoCache();
    }

    function resetBingo() {
      if (bingoCache.currentPlay.length > 0) {
        bingoCache.plays.push(bingoCache.currentPlay);
      }
      hideAllButtons();
      const startButton = document.getElementById('startButton');
      startButton.classList.remove('d-none');

      initBingo();
      const numberElements = document.querySelectorAll('h2');
      numberElements.forEach(element => element.remove());
      document.getElementById('startButton').style.display = 'block';
    }
    function startBingo() {
      hideAllButtons();
      if (bingoCache.currentIndex === 0) {
        initBingo();
      }
      else {
        for (let i = 0; i < bingoCache.currentIndex; i++) {
          displayBingoNumber(bingoCache.numbers[i]);
        }
      }
      const nextButton = document.getElementById('nextButton');
      nextButton.classList.remove('d-none');
      const stopButton = document.getElementById('stopButton');
      stopButton.classList.remove('d-none');
      nextBingoNumber();
    }
    function stopBingo() {
      hideAllButtons();
      const startButton = document.getElementById('startButton');
      startButton.classList.remove('d-none');
      const resetButton = document.getElementById('resetButton');
      resetButton.classList.remove('d-none');
    }
    function hideAllButtons() {
      const startButton = document.getElementById('startButton');
      startButton.classList.add('d-none');
      const stopButton = document.getElementById('stopButton');
      stopButton.classList.add('d-none');
      const playButton = document.getElementById('playButton');
      playButton.classList.add('d-none');
      const nextButton = document.getElementById('nextButton');
      nextButton.classList.add('d-none');
      const pauseButton = document.getElementById('pauseButton');
      pauseButton.classList.add('d-none');
      const resetButton = document.getElementById('resetButton');
      resetButton.classList.add('d-none');
    }
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
    h1 {
      margin-top: 50px;
    }
    .button-container {
      margin-top: 20px;
    }
    h2 {
      font-weight: bold;
      font-size: 48px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1 id="bingoNumber" style="text-align: center;"></h1>
  <div style="text-align: center;">
    <button id="startButton" class="btn btn-success btn-lg" onclick="startBingo()">
      <i class="fas fa-play-circle"></i> Start
    </button>
    <button id="playButton" class="btn btn-primary btn-lg d-none" onclick="playBingoNumber()">
      <i class="fas fa-play"></i> Play
    </button>
    <button id="nextButton" class="btn btn-info btn-lg d-none" onclick="nextBingoNumber()">
      <i class="fas fa-forward"></i> Next
    </button>
    <button id="pauseButton" class="btn btn-primary btn-lg d-none" onclick="pauseBingoNumber()">
      <i class="fas fa-pause"></i> Pause
    </button>
    <button id="stopButton" class="btn btn-danger btn-lg d-none" onclick="stopBingo()">
      <i class="fas fa-stop-circle"></i> Stop
    </button>
    <button id="resetButton" class="btn btn-warning btn-lg d-none" onclick="resetBingo()">
      <i class="fas fa-sync"></i> Reset
    </button>
  </div>
  <div id="display"></div>
</body>
</html>
